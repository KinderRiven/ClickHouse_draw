<mxfile host="app.diagrams.net" modified="2022-03-05T08:58:11.168Z" agent="5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.80 Safari/537.36" etag="w-SXAM4rmTXCPaF1Luu6" version="16.6.4" type="github">
  <diagram id="6MkrssIzSFBIL8_ETOMj" name="第 1 页">
    <mxGraphModel dx="5634" dy="3322" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="AUfJygzl4c1fihGhgo_K-521" value="" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;fontSize=10;dashed=1;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-685" y="-670" width="1095" height="249" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-458" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontSize=13;fontColor=#FF0000;endArrow=block;endFill=0;strokeColor=#1A1A1A;fillColor=#FFE45E;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-1" target="AUfJygzl4c1fihGhgo_K-457">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-1" value="MergeTreeData" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffff88;strokeColor=#36393d;" vertex="1" parent="1">
          <mxGeometry x="200" y="40" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;endArrow=block;endFill=1;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-3" target="AUfJygzl4c1fihGhgo_K-7">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-3" value="IMergeTreeDataPart" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffcccc;strokeColor=#36393d;" vertex="1" parent="1">
          <mxGeometry x="200" y="80" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=0;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-5" target="AUfJygzl4c1fihGhgo_K-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-5" value="IStorage" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffff88;strokeColor=#36393d;" vertex="1" parent="1">
          <mxGeometry x="240" y="-40" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-28" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;endArrow=block;endFill=0;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-7" target="AUfJygzl4c1fihGhgo_K-25">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-7" value="IMergeTreeDataPart" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffff88;strokeColor=#36393d;" vertex="1" parent="1">
          <mxGeometry x="480" y="40" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-11" target="AUfJygzl4c1fihGhgo_K-18">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1040.0000000000002" y="79.99999999999994" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-11" value="IMergeTreeReader" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffff88;strokeColor=#36393d;" vertex="1" parent="1">
          <mxGeometry x="760" y="240" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-13" target="AUfJygzl4c1fihGhgo_K-15">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-13" value="IMergeTreeDataPartWriter" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffff88;strokeColor=#36393d;" vertex="1" parent="1">
          <mxGeometry x="760" y="310" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-15" value="&amp;nbsp;MergeTreeDataPartWriterInMemory" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffff88;strokeColor=#36393d;" vertex="1" parent="1">
          <mxGeometry x="1041" y="380" width="219" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-17" value="MergeTreeDataPartWriterOnDisk" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffff88;strokeColor=#36393d;" vertex="1" parent="1">
          <mxGeometry x="1041" y="420" width="219" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-18" value="MergeTreeReaderWide" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffff88;strokeColor=#36393d;" vertex="1" parent="1">
          <mxGeometry x="1041" y="240" width="219" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-20" value="MergeTreeReaderCompact" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffff88;strokeColor=#36393d;" vertex="1" parent="1">
          <mxGeometry x="1041" y="280" width="219" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-21" value="MergeTreeReaderInMemory" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffff88;strokeColor=#36393d;" vertex="1" parent="1">
          <mxGeometry x="1041" y="320" width="219" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-34" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=1.001;entryY=0.584;entryDx=0;entryDy=0;entryPerimeter=0;endArrow=classic;endFill=1;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-25" target="AUfJygzl4c1fihGhgo_K-18">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-25" value="MergeTreeDataPartWide" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffff88;strokeColor=#36393d;" vertex="1" parent="1">
          <mxGeometry x="760" y="40" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-35" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;endArrow=classic;endFill=1;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-26" target="AUfJygzl4c1fihGhgo_K-20">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1300" y="100" />
              <mxPoint x="1300" y="300" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-26" value="MergeTreeDataPartCompact" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffff88;strokeColor=#36393d;" vertex="1" parent="1">
          <mxGeometry x="760" y="80" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-36" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;endArrow=classic;endFill=1;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-27" target="AUfJygzl4c1fihGhgo_K-21">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1320" y="140" />
              <mxPoint x="1320" y="340" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-27" value="MergeTreeDataPartInMemory" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffff88;strokeColor=#36393d;" vertex="1" parent="1">
          <mxGeometry x="760" y="120" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-198" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontSize=13;endArrow=block;endFill=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-51" target="AUfJygzl4c1fihGhgo_K-194">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="890" y="510" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="930" y="480" />
              <mxPoint x="-40" y="480" />
              <mxPoint x="-40" y="735" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-327" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontColor=#5AA9E6;strokeColor=#1A1A1A;fillColor=#FFE45E;endArrow=block;endFill=0;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-189" target="AUfJygzl4c1fihGhgo_K-326">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-189" value="&lt;span style=&quot;font-size: 15px;&quot;&gt;MergeTreeData&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffff88;strokeColor=#36393d;fontStyle=1;fontSize=15;" vertex="1" parent="1">
          <mxGeometry x="-290" y="520" width="130" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-190" value="&lt;span style=&quot;font-size: 13px&quot;&gt;&lt;span&gt;&lt;u&gt;MergeTreeDataPartType&lt;/u&gt; choosePartType&lt;/span&gt;(size_t bytes_uncompressed, size_t rows_count)&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#1ba1e2;strokeColor=#006EAF;fontStyle=1;fontSize=13;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="-480" y="640" width="320" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-191" value="MergeTreeDataPartType choosePartTypeOnDisk(size_t bytes_uncompressed, size_t rows_count)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e3c800;strokeColor=#B09500;fontStyle=0;fontSize=12;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="-840" y="680" width="680" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-192" value="Note : select data part type according to rows_count &amp;amp; size : Wide/Compact/InMemory" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#76608a;strokeColor=#432D57;fontStyle=0;fontSize=13;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="-840" y="640" width="360" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-194" value="&lt;b&gt;MutableDataPartPtr createPart&lt;/b&gt;(const String &amp;amp; name, &lt;u&gt;&lt;b&gt;MergeTreeDataPartType&lt;/b&gt;&lt;/u&gt; type, const &lt;b&gt;&lt;u&gt;MergeTreePartInfo&lt;/u&gt;&lt;/b&gt; &amp;amp; part_info, const &lt;u&gt;&lt;b&gt;VolumePtr&lt;/b&gt;&lt;/u&gt; &amp;amp; volume, const &lt;u&gt;&lt;b&gt;String&lt;/b&gt;&lt;/u&gt; &amp;amp; relative_path, const &lt;b&gt;&lt;u&gt;IMergeTreeDataPart&lt;/u&gt;&lt;/b&gt; * parent_part = nullptr)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e3c800;strokeColor=#B09500;fontStyle=0;fontSize=12;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="-690" y="710" width="530" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-195" value="Note : create a data part according to data part type" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#76608a;strokeColor=#432D57;fontStyle=0;fontSize=13;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="-900" y="710" width="210" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-196" value="&lt;b&gt;MutableDataPartPtr createPart&lt;/b&gt;(const String &amp;amp; name, const VolumePtr &amp;amp; volume, const String &amp;amp; relative_path, const IMergeTreeDataPart * parent_part = nullptr)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e3c800;strokeColor=#B09500;fontStyle=0;fontSize=12;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="-900" y="760" width="740" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-197" value="&lt;b&gt;MutableDataPartPtr createPart&lt;/b&gt;(const String &amp;amp; name, const MergeTreePartInfo &amp;amp; part_info, const VolumePtr &amp;amp; volume, const String &amp;amp; relative_path, const IMergeTreeDataPart * parent_part = nullptr)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e3c800;strokeColor=#B09500;fontStyle=0;fontSize=12;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="-900" y="800" width="740" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-199" value="&lt;b&gt;MergeTreeData&lt;/b&gt;(const StorageID &amp;amp; table_id_, &lt;b&gt;&lt;u&gt;const String &amp;amp; relative_data_path_&lt;/u&gt;&lt;/b&gt;, const &lt;b&gt;&lt;u&gt;StorageInMemoryMetadata&lt;/u&gt;&lt;/b&gt; &amp;amp; metadata_, &lt;b&gt;ContextMutablePtr&lt;/b&gt; context_, const String &amp;amp; date_column_name, const &lt;b&gt;&lt;u&gt;MergingParams&lt;/u&gt;&lt;/b&gt; &amp;amp; merging_params_, std::unique_ptr&amp;lt;&lt;b&gt;&lt;u&gt;MergeTreeSettings&lt;/u&gt;&lt;/b&gt;&amp;gt; settings_, bool require_part_metadata_, bool attach, BrokenPartCallback broken_part_callback_ = [](const String &amp;amp;){});" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffcccc;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="-890" y="570" width="730" height="70" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-202" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.75;entryY=0;entryDx=0;entryDy=0;fontSize=13;endArrow=block;endFill=0;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-200" target="AUfJygzl4c1fihGhgo_K-199">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-200" value="&amp;nbsp;StorageInMemoryMetadata" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#6a00ff;strokeColor=#3700CC;fontStyle=1;fontSize=15;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="-1130" y="60" width="210" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-203" value="ColumnsDescription columns" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry x="-1130" y="90" width="210" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-204" value="IndicesDescription secondary_indices" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry x="-1190" y="120" width="270" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-205" value="ConstraintsDescription constraints" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry x="-1190" y="150" width="270" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-206" value="Note : Columns of table with their names, types" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#76608a;strokeColor=#432D57;fontStyle=0;fontSize=15;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="-1480" y="90" width="350" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-208" value="Note : Table index" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#76608a;strokeColor=#432D57;fontStyle=0;fontSize=15;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="-1360" y="120" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-210" value="ProjectionsDescription projections" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry x="-1190" y="180" width="270" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-211" value="KeyDescription partition_key" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry x="-1130" y="240" width="210" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-212" value="std::optional&amp;lt;ProjectionDescription&amp;gt; minmax_count_projection" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry x="-1370" y="210" width="450" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-213" value="KeyDescription sorting_key" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry x="-1130" y="270" width="210" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-214" value="TTLColumnsDescription column_ttls_by_name" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry x="-1250" y="300" width="330" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-215" value="TTLTableDescription table_ttl" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry x="-1130" y="330" width="210" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-216" value="ASTPtr settings_changes" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry x="-1110" y="360" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-217" value="SelectQueryDescription select" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry x="-1150" y="390" width="230" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-218" value="String comment" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry x="-1050" y="420" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-219" value="std::unordered_map&amp;lt;String, TTLDescription&amp;gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#76608a;strokeColor=#432D57;fontStyle=0;fontSize=15;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="-1570" y="300" width="320" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-222" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=13;endArrow=block;endFill=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-220" target="AUfJygzl4c1fihGhgo_K-199">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-223" value="Global" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=13;" vertex="1" connectable="0" parent="AUfJygzl4c1fihGhgo_K-222">
          <mxGeometry x="-0.6485" y="-1" relative="1" as="geometry">
            <mxPoint x="-21" y="-1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-220" value="Context" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#6a00ff;strokeColor=#3700CC;fontStyle=1;fontSize=15;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="-840" y="120" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-221" value="StoragePolicyPtr Context::getStoragePolicy&lt;br style=&quot;font-size: 13px;&quot;&gt;(const String &amp;amp; name)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="-840" y="150" width="260" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-230" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=13;endArrow=block;endFill=0;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-224" target="AUfJygzl4c1fihGhgo_K-221">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-224" value="class StoragePolicy" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffff88;strokeColor=#36393d;fontStyle=1;fontSize=15;" vertex="1" parent="1">
          <mxGeometry x="-1080" y="-300" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-237" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=13;endArrow=block;endFill=1;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-225" target="AUfJygzl4c1fihGhgo_K-232">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-225" value="Volumes volumes" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e51400;strokeColor=#B20000;fontStyle=0;fontSize=15;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="-1080" y="-270" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-226" value="const String name" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry x="-1080" y="-240" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-227" value="std::unordered_map&amp;lt;String, size_t&amp;gt; volume_index_by_volume_name" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry x="-1200" y="-210" width="280" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-228" value="std::unordered_map&amp;lt;String, size_t&amp;gt; volume_index_by_disk_name" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry x="-1200" y="-170" width="280" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-229" value="double move_factor = 0.1" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry x="-1120" y="-130" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-232" value="IVolume" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffff88;strokeColor=#36393d;fontStyle=1;fontSize=15;" vertex="1" parent="1">
          <mxGeometry x="-1389.5" y="-270" width="109" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-286" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;fontSize=13;endArrow=block;endFill=1;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-233" target="AUfJygzl4c1fihGhgo_K-241">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-233" value="Disks disks" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e51400;strokeColor=#B20000;fontStyle=0;fontSize=15;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="-1389.5" y="-240" width="109" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-234" value="const String name" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry x="-1429.5" y="-210" width="149" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-235" value="UInt64 max_data_part_size" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry x="-1499.5" y="-180" width="219" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-236" value="bool perform_ttl_move_on_insert" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry x="-1539.5" y="-150" width="259" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-238" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=15;fontColor=#FFFFFF;startArrow=none;startFill=0;endArrow=block;endFill=0;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-239" target="AUfJygzl4c1fihGhgo_K-241">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-239" value="&lt;b&gt;Space&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=15;fillColor=#ffff88;strokeColor=#36393d;fontStyle=0;" vertex="1" parent="1">
          <mxGeometry x="-1620" y="-410" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-240" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=15;fontColor=#FFFFFF;startArrow=none;startFill=0;endArrow=classic;endFill=1;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-241" target="AUfJygzl4c1fihGhgo_K-255">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-1300" y="-385" />
              <mxPoint x="-1300" y="-436" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-241" value="&lt;b&gt;IDisk&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=15;fillColor=#ffff88;strokeColor=#36393d;fontStyle=0;" vertex="1" parent="1">
          <mxGeometry x="-1469.5" y="-410" width="119" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-250" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=15;fontColor=#FFFFFF;startArrow=none;startFill=0;endArrow=classic;endFill=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-251" target="AUfJygzl4c1fihGhgo_K-257">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-1060" y="-670" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-251" value="&lt;b&gt;DiskDecorator&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=15;fillColor=#ffff88;strokeColor=#36393d;fontStyle=0;" vertex="1" parent="1">
          <mxGeometry x="-1270" y="-610.72" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-252" value="&lt;b&gt;DiskMemory&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=15;fillColor=#6a00ff;strokeColor=#3700CC;fontStyle=0;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="-1270" y="-560" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-253" value="&lt;b&gt;DiskWebServer&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=15;fillColor=#ffff88;strokeColor=#36393d;fontStyle=0;" vertex="1" parent="1">
          <mxGeometry x="-1270" y="-510.72" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-254" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=15;fontColor=#FFFFFF;startArrow=none;startFill=0;endArrow=classic;endFill=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-255" target="AUfJygzl4c1fihGhgo_K-261">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-255" value="&lt;b&gt;IDiskRemote&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=15;fillColor=#ffff88;strokeColor=#36393d;fontStyle=0;" vertex="1" parent="1">
          <mxGeometry x="-1270" y="-460.72" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-257" value="&lt;b&gt;DiskCacheWrapper&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=15;fillColor=#ffff88;strokeColor=#36393d;fontStyle=0;" vertex="1" parent="1">
          <mxGeometry x="-1000" y="-740" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-258" value="&lt;b&gt;DiskEncrypted&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=15;fillColor=#ffff88;strokeColor=#36393d;fontStyle=0;" vertex="1" parent="1">
          <mxGeometry x="-1000" y="-690.72" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-259" value="DiskRestartProxy" style="rounded=0;whiteSpace=wrap;html=1;fontSize=15;fillColor=#ffff88;strokeColor=#36393d;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="-1000" y="-641.44" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-260" value="DiskHDFS" style="rounded=0;whiteSpace=wrap;html=1;fontSize=15;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="-1000" y="-510" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-261" value="DiskS3" style="rounded=0;whiteSpace=wrap;html=1;fontSize=15;fillColor=#e51400;strokeColor=#B20000;fontStyle=1;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="-1000" y="-560" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-262" value="&lt;b&gt;DiskLocal&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=15;fillColor=#e51400;strokeColor=#B20000;fontStyle=0;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="-1270" y="-412.15" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-290" value="DiskKV" style="rounded=0;whiteSpace=wrap;html=1;fontSize=15;fontStyle=1;fillColor=#1A1A1A;fontColor=#ffffff;strokeColor=#B20000;" vertex="1" parent="1">
          <mxGeometry x="-1000" y="-460" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-291" value="RemoteMemory" style="rounded=0;whiteSpace=wrap;html=1;fontSize=15;fontStyle=1;fillColor=#1A1A1A;fontColor=#ffffff;strokeColor=#B20000;" vertex="1" parent="1">
          <mxGeometry x="-1000" y="-410" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-292" value="Note : create direcoty in each disk" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#76608a;strokeColor=#432D57;fontStyle=0;fontSize=13;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="-1020" y="570" width="130" height="70" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-294" value="&lt;span&gt;void loadDataParts&lt;/span&gt;(bool skip_sanity_checks)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#1ba1e2;strokeColor=#006EAF;fontStyle=1;fontSize=12;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="-450" y="840" width="290" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-295" value="&lt;b&gt;DataParts getDataParts&lt;/b&gt;(const DataPartStates &amp;amp; affordable_states)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-560" y="880" width="400" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-296" value="Note : Returns a copy of the list so that the caller shouldn&#39;t worry about locks." style="rounded=0;whiteSpace=wrap;html=1;fillColor=#76608a;strokeColor=#432D57;fontStyle=0;fontSize=13;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="-810" y="880" width="250" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-299" value="Note : Load the set of data parts from disk. Call once - immediately after the object is created." style="rounded=0;whiteSpace=wrap;html=1;fillColor=#76608a;strokeColor=#432D57;fontStyle=0;fontSize=13;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="-810" y="840" width="360" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-300" value="&lt;b&gt;DataPartsVector getDataPartsVector&lt;/b&gt;( const DataPartStates &amp;amp; affordable_states, DataPartStateVector * out_states = nullptr, bool require_projection_parts = false)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-620" y="930" width="460" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-301" value="Note : Returns sorted list of the parts with specified states, out_states will contain snapshot of each part state." style="rounded=0;whiteSpace=wrap;html=1;fillColor=#76608a;strokeColor=#432D57;fontStyle=0;fontSize=13;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="-970" y="930" width="350" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-302" value="&lt;b&gt;DataPartsVector getAllDataPartsVector&lt;/b&gt;(DataPartStateVector * out_states = nullptr, bool require_projection_parts = false)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-540" y="980" width="380" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-303" value="Note : Returns absolutely all parts (and snapshot of their states)." style="rounded=0;whiteSpace=wrap;html=1;fillColor=#76608a;strokeColor=#432D57;fontStyle=0;fontSize=13;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="-750" y="980" width="210" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-304" value="&lt;b&gt;DetachedPartsInfo&lt;/b&gt; getDetachedParts()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-410" y="1030" width="250" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-305" value="Note : Returns all detached parts." style="rounded=0;whiteSpace=wrap;html=1;fillColor=#76608a;strokeColor=#432D57;fontStyle=0;fontSize=13;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="-620" y="1030" width="210" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-306" value="&lt;b&gt;DataParts getDataParts&lt;/b&gt;()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-340" y="1070" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-307" value="Note : Returns Committed parts." style="rounded=0;whiteSpace=wrap;html=1;fillColor=#76608a;strokeColor=#432D57;fontStyle=0;fontSize=13;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="-550" y="1070" width="210" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-308" value="&lt;b&gt;DataPartsVector getDataPartsVector&lt;/b&gt;()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-550" y="1110" width="390" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-309" value="&lt;span&gt;DataPartPtr getActiveContainingPart&lt;/span&gt;(const String &amp;amp; part_name)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#1ba1e2;strokeColor=#006EAF;fontStyle=1;fontSize=12;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="-550" y="1140" width="390" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-310" value="&lt;span&gt;DataPartPtr getActiveContainingPart(const MergeTreePartInfo &amp;amp; part_info)&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-840" y="1180" width="680" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-311" value="&lt;span&gt;DataPartPtr getActiveContainingPart(const MergeTreePartInfo &amp;amp; part_info, DataPartState state, DataPartsLock &amp;amp; lock)&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-840" y="1210" width="680" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-312" value="Note : Returns a committed part with the given name or a part containing it." style="rounded=0;whiteSpace=wrap;html=1;fillColor=#76608a;strokeColor=#432D57;fontStyle=0;fontSize=13;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="-840" y="1140" width="290" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-313" value="DataPartsVector getDataPartsVectorInPartition(DataPartState state, const String &amp;amp; partition_id)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-510" y="1240" width="350" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-314" value="DataPartsVector getDataPartsVectorInPartitions(DataPartState state, const std::unordered_set&amp;lt;String&amp;gt; &amp;amp; partition_ids)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-510" y="1280" width="350" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-315" value="DataPartPtr getPartIfExists(const String &amp;amp; part_name, const DataPartStates &amp;amp; valid_states)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-510" y="1320" width="350" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-316" value="DataPartPtr getPartIfExists(const MergeTreePartInfo &amp;amp; part_info, const DataPartStates &amp;amp; valid_states)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-750" y="1360" width="590" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-317" value="Note : Returns the part with the given name and state or nullptr if no such part." style="rounded=0;whiteSpace=wrap;html=1;fillColor=#76608a;strokeColor=#432D57;fontStyle=0;fontSize=13;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="-750" y="1320" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-318" value="&lt;b&gt;size_t getTotalActiveSizeInBytes&lt;/b&gt;()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#a20025;strokeColor=#6F0000;fontStyle=0;fontSize=12;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="-380" y="1400" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-319" value="&lt;b&gt;size_t getTotalActiveSizeInRows&lt;/b&gt;()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#a20025;strokeColor=#6F0000;fontStyle=0;fontSize=12;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="-380" y="1430" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-320" value="&lt;b&gt;size_t getPartsCount&lt;/b&gt;()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#a20025;strokeColor=#6F0000;fontStyle=0;fontSize=12;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="-310" y="1460" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-321" value="&lt;b&gt;size_t getMaxPartsCountForPartitionWithState&lt;/b&gt;(DataPartState state)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#a20025;strokeColor=#6F0000;fontStyle=0;fontSize=12;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="-550" y="1490" width="390" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-322" value="&lt;b&gt;size_t getMaxPartsCountForPartition&lt;/b&gt;()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#a20025;strokeColor=#6F0000;fontStyle=0;fontSize=12;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="-390" y="1520" width="230" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-323" value="&lt;b&gt;size_t getMaxInactivePartsCountForPartition&lt;/b&gt;()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#a20025;strokeColor=#6F0000;fontStyle=0;fontSize=12;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="-440" y="1550" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-324" value="&lt;b&gt;std::optional&amp;lt;Int64&amp;gt; getMinPartDataVersion&lt;/b&gt;()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#a20025;strokeColor=#6F0000;fontStyle=0;fontSize=12;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="-440" y="1580" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-326" value="StorageMergeTree" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffff88;strokeColor=#36393d;fontStyle=1;fontSize=15;" vertex="1" parent="1">
          <mxGeometry y="520" width="150" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-329" value="void startup()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry y="690" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-330" value="void shutdown()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry y="720" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-331" value="std::string getName()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry y="750" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-333" value="bool supportsParallelInsert()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry y="780" width="210" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-334" value="bool supportsIndexForIn()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry y="810" width="210" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-335" value="bool supportsIndexForIn()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry y="840" width="210" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-338" value="Pipe read&lt;span style=&quot;font-weight: normal&quot;&gt;( const Names &amp;amp; column_names, const StorageMetadataPtr &amp;amp; /*metadata_snapshot*/, SelectQueryInfo &amp;amp; query_info, ContextPtr context, QueryProcessingStage::Enum processed_stage, size_t max_block_size, unsigned num_streams)&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e51400;strokeColor=#B20000;fontStyle=1;fontSize=15;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry y="870" width="680" height="70" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-339" value="&lt;b&gt;void read&lt;/b&gt;( QueryPlan &amp;amp; query_plan, const Names &amp;amp; column_names, const StorageMetadataPtr &amp;amp; /*metadata_snapshot*/, SelectQueryInfo &amp;amp; query_info, ContextPtr context, QueryProcessingStage::Enum processed_stage, size_t max_block_size, unsigned num_streams)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e51400;strokeColor=#B20000;fontStyle=0;fontSize=15;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry y="940" width="680" height="70" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-340" value="&lt;b&gt;SinkToStoragePtr write&lt;/b&gt;(const ASTPtr &amp;amp; query, const StorageMetadataPtr &amp;amp; /*metadata_snapshot*/, ContextPtr context)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e51400;strokeColor=#B20000;fontStyle=0;fontSize=15;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry y="1010" width="470" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-341" value="&lt;span&gt;std::optional&amp;lt;UInt64&amp;gt; totalRows(const Settings &amp;amp;)&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry y="1060" width="370" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-342" value="std::optional&amp;lt;UInt64&amp;gt; totalRowsByPartitionPredicate(const SelectQueryInfo &amp;amp;, ContextPtr)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry y="1100" width="430" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-343" value="std::optional&amp;lt;UInt64&amp;gt; totalBytes(const Settings &amp;amp;)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry y="1150" width="360" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-344" value="std::optional&amp;lt;UInt64&amp;gt; totalBytes(const Settings &amp;amp;)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry y="1190" width="360" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-345" value="&lt;b&gt;SinkToStoragePtr write&lt;/b&gt;(const ASTPtr &amp;amp; query, const StorageMetadataPtr &amp;amp; /*metadata_snapshot*/, ContextPtr context)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e51400;strokeColor=#B20000;fontStyle=0;fontSize=15;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry y="1230" width="480" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-346" value="void mutate(const MutationCommands &amp;amp; commands, ContextPtr context)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry y="1280" width="520" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-347" value="std::vector&amp;lt;MergeTreeMutationStatus&amp;gt; getMutationsStatus()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry y="1320" width="480" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-348" value="CancellationCode killMutation(const String &amp;amp; mutation_id)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry y="1360" width="480" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-349" value="void drop()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry y="1390" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-350" value="void truncate(const ASTPtr &amp;amp;, const StorageMetadataPtr &amp;amp;, ContextPtr, TableExclusiveLockHolder &amp;amp;)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry y="1420" width="680" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-352" value="void alter(const AlterCommands &amp;amp; commands, ContextPtr context, AlterLockHolder &amp;amp; table_lock_holder)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e51400;strokeColor=#B20000;fontStyle=0;fontSize=15;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry y="1460" width="720" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-353" value="void checkTableCanBeDropped()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry y="1500" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-354" value="ActionLock getActionLock(StorageActionBlockType action_type)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry y="1540" width="440" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-355" value="void onActionLockRemove(StorageActionBlockType action_type)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry y="1570" width="440" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-356" value="CheckResults checkData(const ASTPtr &amp;amp; query, ContextPtr context)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry y="1600" width="480" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-357" value="RestoreDataTasks restoreFromBackup(const BackupPtr &amp;amp; backup, const String &amp;amp; data_path_in_backup, const ASTs &amp;amp; partitions, ContextMutablePtr context)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry y="1630" width="600" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-358" value="bool scheduleDataProcessingJob(BackgroundJobsAssignee &amp;amp; assignee)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry y="1680" width="490" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-359" value="MergeTreeDeduplicationLog * getDeduplicationLog()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry y="1720" width="360" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-360" value="std::mutex mutation_wait_mutex" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry y="1760" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-361" value="std::condition_variable mutation_wait_event" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry y="1790" width="320" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-362" value="MergeTreeDataSelectExecutor reader" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry y="1820" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-363" value="MergeTreeDataWriter writer" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry y="1850" width="210" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-364" value="MergeTreeDataMergerMutator merger_mutator" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry y="1880" width="330" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-365" value="std::unique_ptr&amp;lt;MergeTreeDeduplicationLog&amp;gt; deduplication_log" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry y="1910" width="440" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-366" value="SimpleIncrement increment" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry y="1940" width="210" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-367" value="AtomicStopwatch time_after_previous_cleanup_parts" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry y="1970" width="380" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-368" value="AtomicStopwatch time_after_previous_cleanup_temporary_directories" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry y="2000" width="490" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-370" value="mutable std::mutex currently_processing_in_background_mutex" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry y="2030" width="450" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-373" value="mutable std::condition_variable currently_processing_in_background_condition" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry y="2060" width="550" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-374" value="DataParts currently_merging_mutating_parts" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry y="2090" width="330" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-375" value="std::map&amp;lt;String, MergeTreeMutationEntry&amp;gt; current_mutations_by_id" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry y="2120" width="490" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-376" value="std::multimap&amp;lt;Int64, MergeTreeMutationEntry &amp;amp;&amp;gt; current_mutations_by_version" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry y="2150" width="590" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-377" value="void loadMutations()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontStyle=0;fontSize=15;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry y="2180" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-378" value="void loadDeduplicationLog()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontStyle=0;fontSize=15;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry y="2210" width="230" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-379" value="bool merge(bool aggressive, const String &amp;amp; partition_id, bool final, bool deduplicate, const Names &amp;amp; deduplicate_by_columns, String * out_disable_reason = nullptr, bool optimize_skip_merged_partitions = false)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontStyle=0;fontSize=15;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry y="2240" width="520" height="70" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-380" value="MergeTreeDataPartPtr outdatePart(const String &amp;amp; part_name, bool force)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontStyle=0;fontSize=15;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry y="2310" width="520" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-381" value="ActionLock stopMergesAndWait()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontStyle=0;fontSize=15;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry y="2340" width="260" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-382" value="Int64 startMutation(const MutationCommands &amp;amp; commands, String &amp;amp; mutation_file_name)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontStyle=0;fontSize=15;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry y="2370" width="620" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-383" value="void waitForMutation(Int64 version, const String &amp;amp; file_name)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontStyle=0;fontSize=15;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry y="2400" width="440" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-384" value="std::shared_ptr&amp;lt;MergeMutateSelectedEntry&amp;gt; selectPartsToMerge( const StorageMetadataPtr &amp;amp; metadata_snapshot, bool aggressive, const String &amp;amp; partition_id, bool final, String * disable_reason, TableLockHolder &amp;amp; table_lock_holder, std::unique_lock&amp;lt;std::mutex&amp;gt; &amp;amp; lock, bool optimize_skip_merged_partitions = false, SelectPartsDecision * select_decision_out = nullptr)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontStyle=0;fontSize=15;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry y="2430" width="650" height="90" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-385" value="std::shared_ptr&amp;lt;MergeMutateSelectedEntry&amp;gt; selectPartsToMutate(const StorageMetadataPtr &amp;amp; metadata_snapshot, String * disable_reason, TableLockHolder &amp;amp; table_lock_holder)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontStyle=0;fontSize=15;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry y="2520" width="650" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-386" value="Int64 getCurrentMutationVersion( const DataPartPtr &amp;amp; part, std::unique_lock&amp;lt;std::mutex&amp;gt; &amp;amp; /* currently_processing_in_background_mutex_lock */)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontStyle=0;fontSize=15;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry y="2570" width="590" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-387" value="void clearOldMutations(bool truncate = false)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontStyle=0;fontSize=15;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry y="2620" width="320" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-390" value="void dropPartNoWaitNoThrow(const String &amp;amp; part_name)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontStyle=0;fontSize=15;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry y="2650" width="400" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-391" value="void dropPart(const String &amp;amp; part_name, bool detach, ContextPtr context)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontStyle=0;fontSize=15;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry y="2680" width="520" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-392" value="void dropPartition(const ASTPtr &amp;amp; partition, bool detach, ContextPtr context)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontStyle=0;fontSize=15;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry y="2710" width="540" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-393" value="void dropPartsImpl(DataPartsVector &amp;amp;&amp;amp; parts_to_remove, bool detach)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontStyle=0;fontSize=15;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry y="2740" width="510" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-394" value="PartitionCommandsResultInfo attachPartition(const ASTPtr &amp;amp; partition, const StorageMetadataPtr &amp;amp; metadata_snapshot, bool part, ContextPtr context)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontStyle=0;fontSize=15;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry y="2770" width="570" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-395" value="void replacePartitionFrom(const StoragePtr &amp;amp; source_table, const ASTPtr &amp;amp; partition, bool replace, ContextPtr context)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontStyle=0;fontSize=15;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry y="2820" width="480" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-397" value="void movePartitionToTable(const StoragePtr &amp;amp; dest_table, const ASTPtr &amp;amp; partition, ContextPtr context)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontStyle=0;fontSize=15;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry y="2870" width="410" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-398" value="bool partIsAssignedToBackgroundOperation(const DataPartPtr &amp;amp; part)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontStyle=0;fontSize=15;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry y="2920" width="500" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-399" value="void updateMutationEntriesErrors(FutureMergedMutatedPartPtr result_part, bool is_successful, const String &amp;amp; exception_message)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontStyle=0;fontSize=15;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry y="2950" width="500" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-400" value="std::optional&amp;lt;MergeTreeMutationStatus&amp;gt; getIncompleteMutationsStatus(Int64 mutation_version, std::set&amp;lt;String&amp;gt; * mutation_ids = nullptr)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontStyle=0;fontSize=15;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry y="3000" width="560" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-401" value="void startBackgroundMovesIfNeeded()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontStyle=0;fontSize=15;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry y="3050" width="320" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-402" value="std::unique_ptr&amp;lt;MergeTreeSettings&amp;gt; getDefaultSettings()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontStyle=0;fontSize=15;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry y="3080" width="400" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-406" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontColor=#5AA9E6;endArrow=block;endFill=1;strokeColor=#1A1A1A;fillColor=#FFE45E;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-403" target="AUfJygzl4c1fihGhgo_K-294">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-524" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.25;exitDx=0;exitDy=0;entryX=1;entryY=0.416;entryDx=0;entryDy=0;entryPerimeter=0;fontSize=10;fontColor=#FF0000;endArrow=block;endFill=1;strokeColor=#1A1A1A;fillColor=#FFE45E;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-403" target="AUfJygzl4c1fihGhgo_K-199">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-403" value="&lt;b&gt;StorageMergeTree&lt;/b&gt;( const StorageID &amp;amp; table_id_, const String &amp;amp; relative_data_path_, const StorageInMemoryMetadata &amp;amp; metadata, bool attach, ContextMutablePtr context_, const String &amp;amp; date_column_name, const MergingParams &amp;amp; merging_params_, std::unique_ptr&amp;lt;MergeTreeSettings&amp;gt; settings_, bool has_force_restore_data_flag)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontStyle=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry y="570" width="530" height="120" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-51" value="IMergeTreeDataPart" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffff88;strokeColor=#36393d;fontStyle=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="850" y="560" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-52" value="virtual MergeTreeReaderPtr getReader()" style="rounded=0;whiteSpace=wrap;html=1;fontStyle=0;fontSize=14;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry x="850" y="600" width="290" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-54" value="virtual MergeTreeWriterPtr getWriter()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontStyle=0;fontSize=14;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry x="850" y="630" width="270" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-37" value="MergeTreeDataPartWide" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffff88;strokeColor=#36393d;fontStyle=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="1331" y="560" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-53" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=14;endArrow=block;endFill=0;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-51" target="AUfJygzl4c1fihGhgo_K-37">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-38" value="&lt;span&gt;MergeTreeReaderPtr getReader( const NamesAndTypesList &amp;amp; columns, const StorageMetadataPtr &amp;amp; metadata_snapshot, const MarkRanges &amp;amp; mark_ranges, UncompressedCache * uncompressed_cache, MarkCache * mark_cache, const MergeTreeReaderSettings &amp;amp; reader_settings_, const ValueSizeMap &amp;amp; avg_value_size_hints, const ReadBufferFromFileBase::ProfileCallback &amp;amp; profile_callback)&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0" vertex="1" parent="1">
          <mxGeometry x="1331" y="600" width="509" height="80" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-55" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=14;endArrow=block;endFill=0;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-52" target="AUfJygzl4c1fihGhgo_K-38">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-39" value="&lt;span&gt;MergeTreeWriterPtr getWriter( const NamesAndTypesList &amp;amp; columns_list, const StorageMetadataPtr &amp;amp; metadata_snapshot, const std::vector&amp;lt;MergeTreeIndexPtr&amp;gt; &amp;amp; indices_to_recalc, const CompressionCodecPtr &amp;amp; default_codec_, const MergeTreeWriterSettings &amp;amp; writer_settings, const MergeTreeIndexGranularity &amp;amp; computed_index_granularity)&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0" vertex="1" parent="1">
          <mxGeometry x="1331" y="680" width="509" height="80" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-56" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=14;endArrow=block;endFill=0;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-54" target="AUfJygzl4c1fihGhgo_K-39">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-40" value="bool isStoredOnDisk()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0" vertex="1" parent="1">
          <mxGeometry x="1331" y="760" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-41" value="bool isStoredOnRemoteDisk()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0" vertex="1" parent="1">
          <mxGeometry x="1331" y="790" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-42" value="bool supportsVerticalMerge()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0" vertex="1" parent="1">
          <mxGeometry x="1331" y="820" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-43" value="String getFileNameForColumn(const NameAndTypePair &amp;amp; column)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0" vertex="1" parent="1">
          <mxGeometry x="1331" y="850" width="400" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-44" value="bool hasColumnFiles(const NameAndTypePair &amp;amp; column)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0" vertex="1" parent="1">
          <mxGeometry x="1331" y="880" width="350" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-45" value="void checkConsistency(bool require_part_metadata)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontStyle=0" vertex="1" parent="1">
          <mxGeometry x="1331" y="910" width="320" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-47" value="void loadIndexGranularity()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontStyle=0" vertex="1" parent="1">
          <mxGeometry x="1331" y="940" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-48" value="ColumnSize getColumnSizeImpl(const NameAndTypePair &amp;amp; column, std::unordered_set&lt;string&gt; * processed_substreams) const;&lt;/string&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontStyle=0" vertex="1" parent="1">
          <mxGeometry x="1331" y="970" width="400" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-49" value="void calculateEachColumnSizes(ColumnSizeByName &amp;amp; each_columns_size, ColumnSize &amp;amp; total_size)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontStyle=0" vertex="1" parent="1">
          <mxGeometry x="1331" y="1010" width="400" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-75" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=13;endArrow=block;endFill=0;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-72" target="AUfJygzl4c1fihGhgo_K-40">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-72" value="virtual bool isStoredOnDisk()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontStyle=0;fontSize=13;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry x="850" y="660" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-76" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=13;endArrow=block;endFill=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-73" target="AUfJygzl4c1fihGhgo_K-41">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1210" y="705" />
              <mxPoint x="1210" y="805" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-73" value="virtual bool isStoredOnRemoteDisk()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#eeeeee;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="690" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-77" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=13;endArrow=block;endFill=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-74" target="AUfJygzl4c1fihGhgo_K-42">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1090" y="740" />
              <mxPoint x="1240" y="740" />
              <mxPoint x="1240" y="835" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-74" value="virtual bool supportsVerticalMerge()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontStyle=0;fontSize=13;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry x="850" y="720" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-78" value="ColumnSize getColumnSize(const String &amp;amp; column_name, const IDataType &amp;amp; /* type */)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="750" width="280" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-80" value="IndexSize getSecondaryIndexSize(const String &amp;amp; secondary_index_name)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="800" width="260" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-81" value="IndexSize getTotalSeconaryIndicesSize()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="850" width="260" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-82" value="virtual String getFileNameForColumn(const NameAndTypePair &amp;amp; column)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="880" width="260" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-83" value="void accumulateColumnSizes(ColumnToSize &amp;amp; /* column_to_size */)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="920" width="280" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-84" value="Type getType()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="970" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-85" value="String getTypeName()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="1000" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-86" value="void setColumns(const NamesAndTypesList &amp; new_columns)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="1030" width="230" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-87" value="const NamesAndTypesList &amp; getColumns()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="1070" width="260" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-89" value="void assertOnDisk()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="1100" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-90" value="void remove()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="1130" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-91" value="void projectionRemove(const String &amp;amp; parent_to, bool keep_shared_data = false)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="1160" width="280" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-92" value="void loadColumnsChecksumsIndexes(bool require_columns_checksums, bool check_consistency)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="1200" width="360" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-93" value="String getMarksFileExtension()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="1240" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-94" value="String getNewName(const MergeTreePartInfo &amp;amp; new_part_info)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="1270" width="400" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-95" value="std::optional&amp;lt;size_t&amp;gt; getColumnPosition(const String &amp;amp; column_name)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="1300" width="430" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-96" value="String getColumnNameWithMinimumCompressedSize(const StorageMetadataPtr &amp;amp; metadata_snapshot)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="1330" width="370" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-97" value="bool contains(const IMergeTreeDataPart &amp;amp; other)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="1380" width="310" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-98" value="std::pair&amp;lt;DayNum, DayNum&amp;gt; getMinMaxDate()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="1410" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-100" value="std::pair&amp;lt;time_t, time_t&amp;gt; getMinMaxTime()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="1440" width="270" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-101" value="bool isEmpty()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="1470" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-102" value="const MergeTreeData &amp;amp; storage" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="1500" width="210" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-103" value="String name" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="1530" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-104" value="MergeTreePartInfo info" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="1560" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-105" value="UUID uuid = UUIDHelpers::Nil" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="1590" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-106" value="VolumePtr volume" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="1620" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-107" value="mutable String relative_path" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="1650" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-108" value="MergeTreeIndexGranularityInfo index_granularity_info" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="1680" width="330" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-109" value="size_t rows_count" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="1710" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-110" value="time_t modification_time" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="1740" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-111" value="mutable std::atomic&amp;lt;time_t&amp;gt; remove_time" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="1770" width="260" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-112" value="bool is_temp" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="1800" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-113" value="bool is_duplicate" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="1830" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-114" value="mutable std::atomic&amp;lt;bool&amp;gt; is_frozen" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="1860" width="230" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-115" value="mutable bool force_keep_shared_data" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="1890" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-116" value="enum class State" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e3c800;strokeColor=#B09500;fontStyle=0;fontSize=13;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="850" y="1920" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-117" value="TTLInfos ttl_infos" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="1950" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-118" value="void setState(State new_state)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="1980" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-119" value="State getState()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="2010" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-120" value="static constexpr std::string_view stateString(State state)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="2040" width="340" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-121" value="constexpr std::string_view stateString()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="2070" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-122" value="String getNameWithState()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="2100" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-123" value="bool checkState(const std::initializer_list&amp;lt;State&amp;gt; &amp;amp; affordable_states)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="2130" width="410" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-124" value="void assertState(const std::initializer_list&amp;lt;State&amp;gt; &amp;amp; affordable_states)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="2160" width="410" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-125" value="Index index" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="2190" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-126" value="MergeTreePartition partition" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="2220" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-127" value="MergeTreeIndexGranularity index_granularity" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="2250" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-128" value="struct MinMaxIndex" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffff88;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="2280" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-129" value="MinMaxIndexPtr minmax_idx" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="2310" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-130" value="Checksums checksums" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="2340" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-131" value="NameSet expired_columns" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="2370" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-132" value="CompressionCodecPtr default_codec" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="2400" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-133" value="UInt64 getIndexSizeInBytes()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="2430" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-134" value="UInt64 getIndexSizeInAllocatedBytes()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="2460" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-135" value="UInt64 getMarksCount()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="2490" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-136" value="void setBytesOnDisk(UInt64 bytes_on_disk_)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="2520" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-137" value="size_t getFileSizeOrZero(const String &amp;amp; file_name)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="2550" width="320" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-138" value="String getFullRelativePath()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="2580" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-139" value="String getFullPath()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="2610" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-140" value="void renameToDetached(const String &amp;amp; prefix)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="2640" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-141" value="virtual void renameTo(const String &amp;amp; new_relative_path, bool remove_new_dir_if_exists)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#eeeeee;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="2670" width="320" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-142" value="virtual bool hasColumnFiles(const NameAndTypePair &amp;amp; /* column */)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#eeeeee;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="2780" width="430" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-143" value="virtual void makeCloneInDetached(const String &amp;amp; prefix, const StorageMetadataPtr &amp;amp; metadata_snapshot)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#eeeeee;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="2710" width="400" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-144" value="void makeCloneOnDisk(const DiskPtr &amp;amp; disk, const String &amp;amp; directory_name)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="2750" width="455" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-145" value="bool shallParticipateInMerges(const StoragePolicyPtr &amp;amp; storage_policy)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="2810" width="430" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-146" value="static UInt64 calculateTotalSizeOnDisk(const DiskPtr &amp;amp; disk_, const String &amp;amp; from)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="2840" width="490" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-147" value="void calculateColumnsAndSecondaryIndicesSizesOnDisk()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="2870" width="360" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-148" value="String getRelativePathForPrefix(const String &amp;amp; prefix)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="2900" width="330" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-149" value="bool isProjectionPart()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="2930" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-150" value="const IMergeTreeDataPart * getParentPart()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="2960" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-151" value="const std::map&amp;lt;String, std::shared_ptr&amp;lt;IMergeTreeDataPart&amp;gt;&amp;gt; &amp;amp; getProjectionParts()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="2990" width="400" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-152" value="void addProjectionPart(const String &amp;amp; projection_name, std::shared_ptr&amp;lt;IMergeTreeDataPart&amp;gt; &amp;amp;&amp;amp; projection_part)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="3030" width="400" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-153" value="bool hasProjection(const String &amp;amp; projection_name)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="3070" width="320" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-154" value="void loadProjections(bool require_columns_checksums, bool check_consistency)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="3100" width="340" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-155" value="NameSet getFileNamesWithoutChecksums()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="3140" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-156" value="bool checkAllTTLCalculated(const StorageMetadataPtr &amp;amp; metadata_snapshot)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="3170" width="470" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-157" value="SerializationPtr getSerializationForColumn(const NameAndTypePair &amp;amp; column)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="3200" width="470" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-158" value="String getUniqueId()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="3230" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-159" value="ColumnSize total_columns_size" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="3260" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-160" value="ColumnSizeByName columns_sizes" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="3290" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-161" value="ColumnSize total_secondary_indices_size" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="3320" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-162" value="IndexSizeByName secondary_index_sizes" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="3350" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-163" value="UInt64 bytes_on_disk{0}" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="3380" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-164" value="NamesAndTypesList columns" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="3410" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-165" value="const Type part_type" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="3440" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-166" value="const IMergeTreeDataPart * parent_part" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="3470" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-167" value="std::map&amp;lt;String, std::shared_ptr&amp;lt;IMergeTreeDataPart&amp;gt;&amp;gt; projection_parts" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="3500" width="360" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-168" value="void removeIfNeeded()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="3540" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-169" value="virtual void checkConsistency(bool require_part_metadata)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#eeeeee;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="3570" width="370" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-170" value="void checkConsistencyBase()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="3600" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-171" value="virtual void calculateEachColumnSizes(ColumnSizeByName &amp;amp; each_columns_size, ColumnSize &amp;amp; total_size)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#eeeeee;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="3630" width="370" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-172" value="String getRelativePathForDetachedPart(const String &amp;amp; prefix)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="3670" width="370" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-173" value="std::optional&amp;lt;bool&amp;gt; keepSharedDataInDecoupledStorage()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="3700" width="370" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-174" value="NameToNumber column_name_to_position" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="3730" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-175" value="void loadUUID()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="3760" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-176" value="void loadColumns(bool require)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="3790" width="210" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-177" value="void loadChecksums(bool require)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="3820" width="230" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-178" value="virtual void loadIndexGranularity()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="3850" width="230" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-179" value="void loadIndex()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="3880" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-180" value="void loadRowsCount()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="3910" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-182" value="void loadTTLInfos()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="3940" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-183" value="void loadPartitionAndMinMaxIndex()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="3970" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-184" value="void calculateColumnsSizesOnDisk()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="4000" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-185" value="void calculateSecondaryIndicesSizesOnDisk()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="4030" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-186" value="void loadDefaultCompressionCodec()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="4060" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-187" value="CompressionCodecPtr detectDefaultCompressionCodec()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="4090" width="360" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-188" value="mutable State state{State::Temporary}" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="850" y="4120" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-420" value="&lt;span&gt;String relative_data_path&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-330" y="1610" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-424" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontSize=13;fontColor=#FF0000;endArrow=classicThin;endFill=1;strokeColor=#1A1A1A;fillColor=#FFE45E;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-421" target="AUfJygzl4c1fihGhgo_K-423">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-421" value="ColumnSizeByName column_sizes" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-400" y="1640" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-432" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontSize=13;fontColor=#FF0000;endArrow=classicThin;endFill=1;strokeColor=#1A1A1A;fillColor=#FFE45E;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-422" target="AUfJygzl4c1fihGhgo_K-431">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-422" value="IndexSizeByName secondary_index_sizes" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-410" y="1670" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-426" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontSize=13;fontColor=#FF0000;endArrow=classicThin;endFill=1;strokeColor=#1A1A1A;fillColor=#FFE45E;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-423" target="AUfJygzl4c1fihGhgo_K-425">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-423" value="ColumnSizeByName = std::unordered_map&amp;lt;std::string, ColumnSize&amp;gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fad9d5;strokeColor=#ae4132;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-730" y="1600" width="250" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-425" value="ColumnSize" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffff88;strokeColor=#36393d;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-890" y="1540" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-428" value="size_t marks" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-890" y="1560" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-429" value="size_t data_compressed" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-940" y="1580" width="150" height="20" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-430" value="size_t data_uncompressed" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-950" y="1600" width="160" height="20" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-433" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontSize=13;fontColor=#FF0000;endArrow=classicThin;endFill=1;strokeColor=#1A1A1A;fillColor=#FFE45E;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-431" target="AUfJygzl4c1fihGhgo_K-425">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-431" value="IndexSizeByName = std::unordered_map&amp;lt;std::string, ColumnSize&amp;gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fad9d5;strokeColor=#ae4132;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-730" y="1660" width="250" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-434" value="UInt64 bytes_on_disk" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-320" y="1700" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-437" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontSize=13;fontColor=#FF0000;endArrow=classicThin;endFill=1;strokeColor=#1A1A1A;fillColor=#FFE45E;fontStyle=0" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-435" target="AUfJygzl4c1fihGhgo_K-436">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-435" value="NamesAndTypesList columns" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-360" y="1730" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-441" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.75;entryDx=0;entryDy=0;fontSize=13;fontColor=#FF0000;endArrow=classicThin;endFill=1;strokeColor=#1A1A1A;fillColor=#FFE45E;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-436" target="AUfJygzl4c1fihGhgo_K-438">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-770" y="1735" />
              <mxPoint x="-770" y="1675" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-436" value="std::list&amp;lt;NameAndTypePair&amp;gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fad9d5;strokeColor=#ae4132;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-680" y="1720" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-438" value="NameAndTypePair" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffff88;strokeColor=#36393d;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-910" y="1660" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-439" value="String name" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-870" y="1680" width="80" height="20" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-440" value="DataTypePtr type" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-900" y="1700" width="110" height="20" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-442" value="BrokenPartCallback broken_part_callback" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-430" y="1760" width="270" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-443" value="String log_name" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-270" y="1790" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-444" value="Poco::Logger * log" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-300" y="1820" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-445" value="MultiVersion&amp;lt;MergeTreeSettings&amp;gt; storage_settings" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-470" y="1850" width="310" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-447" value="mutable std::shared_mutex pinned_part_uuids_mutex" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-490" y="1880" width="330" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-448" value="PinnedPartUUIDsPtr pinned_part_uuids" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-400" y="1910" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-449" value="mutable std::mutex data_parts_mutex" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-400" y="1940" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-474" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#FF0000;endArrow=classic;endFill=1;strokeColor=#1A1A1A;fillColor=#FFE45E;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-450" target="AUfJygzl4c1fihGhgo_K-459">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-520" y="1985" />
              <mxPoint x="-520" y="1865" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-450" value="DataPartsIndexes data_parts_indexes" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e51400;strokeColor=#B20000;fontStyle=1;fontSize=12;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="-400" y="1970" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-514" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#FF0000;endArrow=classic;endFill=1;strokeColor=#1A1A1A;fillColor=#FFE45E;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-451" target="AUfJygzl4c1fihGhgo_K-468">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-451" value="DataPartsIndexes::index&amp;lt;TagByInfo&amp;gt;::type &amp;amp; data_parts_by_info" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-550" y="2000" width="390" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-518" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#FF0000;endArrow=classic;endFill=1;strokeColor=#1A1A1A;fillColor=#FFE45E;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-452" target="AUfJygzl4c1fihGhgo_K-471">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-452" value="DataPartsIndexes::index&amp;lt;TagByStateAndInfo&amp;gt;::type &amp;amp; data_parts_by_state_and_info" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-670" y="2030" width="510" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-453" value="MergeTreePartsMover parts_mover" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-390" y="2060" width="230" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-457" value="StorageMergeTree" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffff88;strokeColor=#36393d;" vertex="1" parent="1">
          <mxGeometry y="40" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-473" value="" style="group" vertex="1" connectable="0" parent="1">
          <mxGeometry x="-1840" y="1850" width="1070" height="140" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-459" value="boost::multi_index_container&amp;lt;&amp;gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#1ba1e2;strokeColor=#006EAF;fontStyle=1;fontSize=12;fontColor=#ffffff;" vertex="1" parent="AUfJygzl4c1fihGhgo_K-473">
          <mxGeometry width="1070" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-461" value="boost::multi_index::indexed_by&amp;lt;&amp;gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#6a00ff;strokeColor=#3700CC;fontStyle=1;fontSize=12;fontColor=#ffffff;" vertex="1" parent="AUfJygzl4c1fihGhgo_K-473">
          <mxGeometry x="120" y="30" width="950" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-462" value="boost::multi_index::ordered_unique &amp;lt;&lt;br&gt;&lt;span style=&quot;font-weight: normal&quot;&gt;/// index by info&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e3c800;strokeColor=#B09500;fontStyle=1;fontSize=12;fontColor=#000000;" vertex="1" parent="AUfJygzl4c1fihGhgo_K-473">
          <mxGeometry x="120" y="60" width="230" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-463" value="boost::multi_index::ordered_unique &amp;lt;&lt;br&gt;&lt;span style=&quot;font-weight: normal&quot;&gt;/// index by (status, info)&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e3c800;strokeColor=#B09500;fontStyle=1;fontSize=12;fontColor=#000000;" vertex="1" parent="AUfJygzl4c1fihGhgo_K-473">
          <mxGeometry x="120" y="100" width="230" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-466" value="boost::multi_index::tag&amp;lt;TagByInfo&amp;gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#6d8764;strokeColor=#3A5431;fontStyle=0;fontSize=12;fontColor=#ffffff;" vertex="1" parent="AUfJygzl4c1fihGhgo_K-473">
          <mxGeometry x="350" y="60" width="250" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-467" value="boost::multi_index::global_fun&amp;lt;const DataPartPtr &amp;amp;, const MergeTreePartInfo &amp;amp;, dataPartPtrToInfo&amp;gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#6d8764;strokeColor=#3A5431;fontStyle=0;fontSize=12;fontColor=#ffffff;" vertex="1" parent="AUfJygzl4c1fihGhgo_K-473">
          <mxGeometry x="600" y="60" width="450" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-468" value="&amp;gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e3c800;strokeColor=#B09500;fontStyle=1;fontSize=12;fontColor=#000000;" vertex="1" parent="AUfJygzl4c1fihGhgo_K-473">
          <mxGeometry x="1050" y="60" width="20" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-469" value="&lt;font style=&quot;font-size: 10px;&quot;&gt;boost::multi_index::tag&amp;lt;TagByStateAndInfo&amp;gt;&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#6d8764;strokeColor=#3A5431;fontStyle=0;fontSize=10;fontColor=#ffffff;" vertex="1" parent="AUfJygzl4c1fihGhgo_K-473">
          <mxGeometry x="350" y="100" width="250" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-470" value="boost::multi_index::global_fun&amp;lt;const DataPartPtr &amp;amp;, const MergeTreePartInfo &amp;amp;, dataPartPtrToInfo&amp;gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#6d8764;strokeColor=#3A5431;fontStyle=0;fontSize=12;fontColor=#ffffff;" vertex="1" parent="AUfJygzl4c1fihGhgo_K-473">
          <mxGeometry x="600" y="100" width="300" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-471" value="&amp;gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e3c800;strokeColor=#B09500;fontStyle=1;fontSize=12;fontColor=#000000;" vertex="1" parent="AUfJygzl4c1fihGhgo_K-473">
          <mxGeometry x="1050" y="100" width="20" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-472" value="DataPartPtr" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e51400;strokeColor=#B20000;fontStyle=1;fontSize=12;fontColor=#ffffff;" vertex="1" parent="AUfJygzl4c1fihGhgo_K-473">
          <mxGeometry y="30" width="120" height="110" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-476" value="LessStateDataPart" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#6d8764;strokeColor=#3A5431;fontStyle=0;fontSize=12;fontColor=#ffffff;" vertex="1" parent="AUfJygzl4c1fihGhgo_K-473">
          <mxGeometry x="900" y="100" width="150" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-517" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#FF0000;endArrow=classic;endFill=1;strokeColor=#1A1A1A;fillColor=#FFE45E;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-477" target="AUfJygzl4c1fihGhgo_K-459">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-1860" y="1573" />
              <mxPoint x="-1860" y="1865" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-477" value="DataPartState" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffff88;strokeColor=#36393d;fontStyle=1;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-1680" y="1560" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-478" value="NEED_PREPARE" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e3c800;strokeColor=#B09500;fontStyle=0;fontSize=12;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="-1680" y="1585" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-479" value="NEED_EXECUTE" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e3c800;strokeColor=#B09500;fontStyle=0;fontSize=12;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="-1680" y="1610" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-480" value="NEED_FINISH" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e3c800;strokeColor=#B09500;fontStyle=0;fontSize=12;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="-1680" y="1635" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-481" value="SUCCESS" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e3c800;strokeColor=#B09500;fontStyle=0;fontSize=12;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="-1680" y="1660" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-493" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#FF0000;endArrow=classic;endFill=1;strokeColor=#1A1A1A;fillColor=#FFE45E;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-484" target="AUfJygzl4c1fihGhgo_K-459">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-1135" y="1570" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-484" value="MergeTreePartInfo" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffff88;strokeColor=#36393d;fontStyle=1;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-1480" y="1560" width="160" height="25" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-485" value="String partition_id" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-1480" y="1585" width="160" height="25" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-486" value="Int64 min_block" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-1480" y="1610" width="160" height="25" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-487" value="Int64 max_block" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-1480" y="1635" width="160" height="25" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-489" value="UInt32 level" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-1480" y="1660" width="160" height="25" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-490" value="Int64 mutation" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-1480" y="1685" width="160" height="25" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-491" value="bool use_leagcy_max_level" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-1480" y="1710" width="160" height="25" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-494" value="bool operator &amp;lt;, == , !=&amp;nbsp;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f0a30a;strokeColor=#BD7000;fontStyle=0;fontSize=12;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="-1480" y="1735" width="160" height="25" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-495" value="" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;fontSize=10;dashed=1;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-680" y="-400" width="1440" height="290" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-411" value="&lt;font style=&quot;font-size: 13px&quot;&gt;&lt;b&gt;void&amp;nbsp;&lt;/b&gt;&lt;span style=&quot;font-weight: 700&quot;&gt;MergeTreeData::&lt;/span&gt;&lt;b&gt;loadDataParts&lt;/b&gt;(bool skip_sanity_checks)&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-506" y="-305" width="280" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-412" value="&lt;b&gt;void loadDataPartsFromDisk&lt;/b&gt;( DataPartsVector &amp;amp; broken_parts_to_detach, DataPartsVector &amp;amp; duplicate_parts_to_remove, ThreadPool &amp;amp; pool, size_t num_parts, &lt;u&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;std::queue&amp;lt;std::vector&amp;lt;std::pair&amp;lt;String, DiskPtr&amp;gt;&amp;gt;&amp;gt; &amp;amp; parts_queue&lt;/font&gt;&lt;/b&gt;&lt;/u&gt;, bool skip_sanity_checks, const MergeTreeSettingsPtr &amp;amp; settings)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-336" y="-230" width="610" height="60" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-414" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=13;fontColor=#FF0000;endArrow=classicThin;endFill=1;strokeColor=#1A1A1A;fillColor=#FFE45E;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-411" target="AUfJygzl4c1fihGhgo_K-412">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-413" value="&lt;b&gt;void loadDataPartsFromWAL&lt;/b&gt;( DataPartsVector &amp;amp; broken_parts_to_detach, DataPartsVector &amp;amp; duplicate_parts_to_remove, &lt;u&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;MutableDataPartsVector &amp;amp; parts_from_wal&lt;/b&gt;&lt;/font&gt;&lt;/u&gt;, DataPartsLock &amp;amp; part_lock)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-336" y="-170" width="610" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-416" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=13;fontColor=#FF0000;endArrow=classicThin;endFill=1;strokeColor=#1A1A1A;fillColor=#FFE45E;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-415" target="AUfJygzl4c1fihGhgo_K-411">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-415" value="new StorageMergeTree" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontStyle=1;fontSize=15;" vertex="1" parent="1">
          <mxGeometry x="-660" y="-380" width="204" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-418" value="&lt;b&gt;MutableDataPartPtr createPart&lt;/b&gt;(const String &amp;amp; name, const MergeTreePartInfo &amp;amp; part_info, const VolumePtr &amp;amp; volume, const String &amp;amp; relative_path, const IMergeTreeDataPart * parent_part = nullptr)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="340" y="-340" width="400" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-419" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=13;fontColor=#FF0000;endArrow=classicThin;endFill=1;strokeColor=#1A1A1A;fillColor=#FFE45E;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-412" target="AUfJygzl4c1fihGhgo_K-418">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-455" value="&lt;b&gt;data_parts_indexes.insert(part)&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e51400;strokeColor=#B20000;fontStyle=0;fontSize=12;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="340" y="-290" width="400" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-511" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#FF0000;endArrow=classic;endFill=1;strokeColor=#1A1A1A;fillColor=#FFE45E;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-509" target="AUfJygzl4c1fihGhgo_K-510">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-509" value="MergeTreeData::DataPartPtr&amp;nbsp;&lt;b&gt;MergeTreeData::getActiveContainingPart&lt;br&gt;&lt;/b&gt;(const String &amp;amp; part_name)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-655" y="-651" width="420" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-513" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#FF0000;endArrow=classic;endFill=1;strokeColor=#1A1A1A;fillColor=#FFE45E;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-510" target="AUfJygzl4c1fihGhgo_K-512">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-510" value="MergeTreeData::DataPartPtr &lt;b&gt;MergeTreeData::getActiveContainingPart&lt;br&gt;&lt;/b&gt;(const MergeTreePartInfo &amp;amp; part_info)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-518" y="-591" width="413" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-512" value="&lt;b&gt;MergeTreeData::DataPartPtr MergeTreeData::getActiveContainingPart&lt;/b&gt;( const MergeTreePartInfo &amp;amp; part_info, MergeTreeData::DataPartState state, DataPartsLock &amp;amp; /*lock*/)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-385" y="-531.72" width="400" height="50.72" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-519" value="&lt;b&gt;boost::iterator_range&amp;lt;DataPartIteratorByStateAndInfo&amp;gt; getDataPartsStateRange&lt;/b&gt;(DataPartState state)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-385" y="-481" width="400" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-523" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#FF0000;endArrow=block;endFill=0;strokeColor=#1A1A1A;fillColor=#FFE45E;" edge="1" parent="1" source="AUfJygzl4c1fihGhgo_K-522" target="AUfJygzl4c1fihGhgo_K-519">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-522" value="&lt;span&gt;&lt;b&gt;DataPartsIndexes::index&amp;lt;TagByStateAndInfo&amp;gt;::type &amp;amp; data_parts_by_state_and_info&lt;/b&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="80" y="-480" width="310" height="39" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-525" value="BackgroundJobsAssignee background_operations_assignee" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-510" y="2090" width="350" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-526" value="BackgroundJobsAssignee background_moves_assignee" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-480" y="2120" width="320" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-527" value="std::function&amp;lt;void(bool)&amp;gt; common_assignee_trigger" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-460" y="2150" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-528" value="std::function&amp;lt;void(bool)&amp;gt; moves_assignee_trigger" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-440" y="2180" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-530" value="virtual void dropPartNoWaitNoThrow(const String &amp;amp; part_name)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fad9d5;strokeColor=#ae4132;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-530" y="2210" width="370" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-531" value="virtual void dropPart(const String &amp;amp; part_name, bool detach, ContextPtr context)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fad9d5;strokeColor=#ae4132;fontStyle=1;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-640" y="2240" width="480" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-532" value="virtual void dropPartition(const ASTPtr &amp;amp; partition, bool detach, ContextPtr context)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fad9d5;strokeColor=#ae4132;fontStyle=1;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-660" y="2270" width="500" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-533" value="virtual PartitionCommandsResultInfo attachPartition(const ASTPtr &amp;amp; partition, const StorageMetadataPtr &amp;amp; metadata_snapshot, bool part, ContextPtr context)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fad9d5;strokeColor=#ae4132;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-610" y="2300" width="450" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-534" value="virtual void replacePartitionFrom(const StoragePtr &amp;amp; source_table, const ASTPtr &amp;amp; partition, bool replace, ContextPtr context)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fad9d5;strokeColor=#ae4132;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-550" y="2340" width="390" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-537" value="virtual void movePartitionToTable(const StoragePtr &amp;amp; dest_table, const ASTPtr &amp;amp; partition, ContextPtr context)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fad9d5;strokeColor=#ae4132;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-500" y="2380" width="340" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AUfJygzl4c1fihGhgo_K-538" value="virtual void movePartitionToShard(const ASTPtr &amp;amp; partition, bool move_part, const String &amp;amp; to, ContextPtr query_context)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fad9d5;strokeColor=#ae4132;fontStyle=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="-500" y="2420" width="340" height="40" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
